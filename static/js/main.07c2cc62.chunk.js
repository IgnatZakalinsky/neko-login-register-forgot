(this["webpackJsonplogin-register-forgot"]=this["webpackJsonplogin-register-forgot"]||[]).push([[0],{37:function(e,t,r){e.exports=r(67)},42:function(e,t,r){},43:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(18),o=r.n(c),s=(r(42),r(43),r(12)),l=r(7),u=r(4),i=function(e){var t=e.email,r=e.password,n=e.loading,c=e.success,o=e.error,l=e.rememberMe,u=e.signInRememberMeCallback,i=e.signInSetEmailCallback,m=e.signInSetPasswordCallback,g=e.signInCallback;return"string"!==typeof o&&(o=JSON.stringify(o)),a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"sign-in",n&&a.a.createElement("div",{style:{color:"orange"}},"loading..."),c&&a.a.createElement("div",{style:{color:"lime"}},"Success!"),o&&a.a.createElement("div",{style:{color:"red"}},o),a.a.createElement("div",null,a.a.createElement("input",{value:t,onChange:function(e){return i(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("input",{value:r,onChange:function(e){return m(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(s.b,{to:Y},"Forgot password?")),a.a.createElement("div",null,a.a.createElement("button",{onClick:g},"Sign In")),a.a.createElement("div",null,a.a.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return u(e.currentTarget.checked)}}),"Remember Me"),a.a.createElement("div",null,a.a.createElement(s.b,{to:X},"Registration")))},m=r(6),g=function(e){return{type:"SIGN_IN/SUCCESS",success:e}},d=function(e){return{type:"SIGN_IN/ERROR",error:e}},f=r(2),E=r.n(f),p=r(15),b=r.n(p),v="https://ancient-gorge-20298.herokuapp.com/",S=b.a.create({baseURL:v}),O=function(e,t,r){var n;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(S.post("/auth/login",{email:e,password:t,rememberMe:r}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},h=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^1+(e.length-r)%32);return t},w=function(e){return{type:"NEKO/SET_NAME",name:e}},k=function(e,t,r){document.cookie="".concat(e,"=").concat(t,";max-age=").concat(r,";path=/")},R=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},y=/^[\w]{1}[\w-\.]*@[\w-]+\.[a-z]{2,7}$/i,C=function(e){return y.test(e)},I=function(e){return e.length>7},j=b.a.create({baseURL:v}),T=function(e){var t;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap(j.post("/auth/me",{token:e}));case 2:return t=r.sent,r.abrupt("return",t.data);case 4:case"end":return r.stop()}}))},x=function(){return function(e,t){var r,n;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w("Loading...")),r=R("token")||"",t.prev=2,t.next=5,E.a.awrap(T(r));case 5:(n=t.sent).error?(e(w(n.error)),console.log("Neko Get Me Error!",n.error,r),k("token","",-1e3)):(e(w(n.name)),k("token",n.token,172800),e(g(!0)),console.log("Neko Get Me Success!",n.name)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),e(w(t.t0.message)),console.log("Neko Get Me Error!",t.t0);case 13:case"end":return t.stop()}}),null,null,[[2,9]])}},G=function(){var e=Object(m.c)((function(e){return e.signIn})),t=Object(m.b)(),r=Object(n.useState)("test@emali.nya"),c=Object(l.a)(r,2),o=c[0],s=c[1],f=Object(n.useState)("test password nya"),p=Object(l.a)(f,2),b=p[0],v=p[1],S=Object(n.useState)(!1),R=Object(l.a)(S,2),y=R[0],j=R[1];Object(n.useEffect)((function(){t(x())}),[]);var T=Object(n.useState)(!1),G=Object(l.a)(T,2),N=G[0],A=G[1];return e.success&&setTimeout((function(){return A(!0)}),500),N?(setTimeout((function(){t(g(!1))}),500),a.a.createElement(u.a,{to:Z})):a.a.createElement(i,{email:o,password:b,loading:e.loading,success:e.success,error:e.error,rememberMe:y,signInRememberMeCallback:j,signInSetEmailCallback:s,signInSetPasswordCallback:v,signInCallback:function(){C(o)?I(b)?t(function(e,t,r){return function(n,a){var c;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"SIGN_IN/LOADING",loading:!0}),a.prev=1,a.next=4,E.a.awrap(O(e,h(t),r));case 4:(c=a.sent).error?n(d(c.error)):(n(w(c.name)),k("token",c.token,172800),n(g(!0)),console.log("Neko Sign-in Success!",c)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(d(a.t0.message)),console.log("Neko Sign-in Error!",a.t0);case 12:case"end":return a.stop()}}),null,null,[[1,8]])}}(o,b,y)):t(d("Password not valid! must be more than 7 characters...")):t(d("Email not valid!"))}})},N=function(){return a.a.createElement(G,null)},A=function(e){var t=e.email,r=e.password,n=e.password2,c=e.loading,o=e.success,s=e.error,l=e.registerSetEmailCallback,u=e.registerSetPasswordCallback,i=e.registerSetPasswordCallback2,m=e.registerCallback;return"string"!==typeof s&&(s=JSON.stringify(s)),a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"register",c&&a.a.createElement("div",{style:{color:"orange"}},"loading..."),o&&a.a.createElement("div",{style:{color:"lime"}},"Success!"),s&&a.a.createElement("div",{style:{color:"red"}},s),a.a.createElement("div",null,a.a.createElement("input",{value:t,onChange:function(e){return l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("input",{value:r,onChange:function(e){return u(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("input",{value:n,onChange:function(e){return i(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("button",{onClick:m},"Register")))},_=function(e){return{type:"REGISTER/SUCCESS",success:e}},F=function(e){return{type:"REGISTER/ERROR",error:e}},L=b.a.create({baseURL:v}),M=function(e,t){var r;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(L.post("/auth/register",{email:e,password:t}));case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}))},P=function(){var e=Object(m.c)((function(e){return e.register})),t=Object(m.b)(),r=Object(n.useState)(!1),c=Object(l.a)(r,2),o=c[0],s=c[1];return e.success&&setTimeout((function(){return s(!0)}),500),o?(setTimeout((function(){t(_(!1))}),500),a.a.createElement(u.a,{to:V})):a.a.createElement(A,{email:e.email,password:e.password,password2:e.password2,loading:e.loading,success:e.success,error:e.error,registerSetEmailCallback:function(e){return t(function(e){return{type:"REGISTER/SET_EMAIL",email:e}}(e))},registerSetPasswordCallback:function(e){return t(function(e){return{type:"REGISTER/SET_PASSWORD",password:e}}(e))},registerSetPasswordCallback2:function(e){return t({type:"REGISTER/SET_PASSWORD_2",password2:e})},registerCallback:function(){C(e.email)?I(e.password)?e.password!==e.password2?t(F("Passwords do not match!")):t((function(e,t){var r,n,a,c;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e({type:"REGISTER/LOADING",loading:!0}),r=t().register,n=r.email,a=r.password,o.prev=2,o.next=5,E.a.awrap(M(n,h(a)));case 5:(c=o.sent).error?e(F(c.error)):(e(_(!0)),console.log("Neko Register Success!",c)),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(2),e(F(o.t0.message)),console.log("Neko Register Error!",o.t0);case 13:case"end":return o.stop()}}),null,null,[[2,9]])})):t(F("Password not valid! must be more than 7 characters...")):t(F("Email not valid!"))}})},U=function(){return a.a.createElement(P,null)},D=function(e){var t=e.email,r=e.loading,n=e.success,c=e.error,o=e.forgotSetEmailCallback,s=e.forgotCallback;return"string"!==typeof c&&(c=JSON.stringify(c)),a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"forgot",r&&a.a.createElement("div",{style:{color:"orange"}},"loading..."),n&&a.a.createElement("div",{style:{color:"lime"}},"Success!"),c&&a.a.createElement("div",{style:{color:"red"}},c),a.a.createElement("div",null,a.a.createElement("input",{value:t,onChange:function(e){return o(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("button",{onClick:s},"Send email")))},W=function(e){return{type:"FORGOT/SUCCESS",success:e}},J=function(e){return{type:"FORGOT/ERROR",error:e}},$=b.a.create({baseURL:v}),B=function(e){var t;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap($.post("/auth/forgot",{email:e}));case 2:return t=r.sent,r.abrupt("return",t.data);case 4:case"end":return r.stop()}}))},K=function(){var e=Object(m.c)((function(e){return e.forgot})),t=Object(m.b)(),r=Object(n.useState)(!1),c=Object(l.a)(r,2),o=c[0],s=c[1];return e.success&&setTimeout((function(){return s(!0)}),500),o?(setTimeout((function(){t(W(!1))}),500),a.a.createElement(u.a,{to:V})):a.a.createElement(D,{email:e.email,loading:e.loading,success:e.success,error:e.error,forgotSetEmailCallback:function(e){return t(function(e){return{type:"FORGOT/SET_EMAIL",email:e}}(e))},forgotCallback:function(){C(e.email)?t((function(e,t){var r,n;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:"FORGOT/LOADING",loading:!0}),r=t().forgot.email,a.prev=2,a.next=5,E.a.awrap(B(r));case 5:(n=a.sent).error?e(J(n.error)):(e(W(!0)),console.log("Neko Forgot Success!",n)),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),e(J(a.t0.message)),console.log("Neko Forgot Error!",a.t0);case 13:case"end":return a.stop()}}),null,null,[[2,9]])})):t(J("Email not valid!"))}})},z=function(){return a.a.createElement(K,null)},q=function(e){var t=e.name,r=e.logoutCallback;return a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"neko",t&&a.a.createElement("div",{style:{color:"lime"}},t),a.a.createElement("div",null,a.a.createElement("button",{onClick:r},"logout")))},H=function(){var e=Object(m.c)((function(e){return e.neko})),t=Object(m.b)();Object(n.useEffect)((function(){t(x())}),[]);var r=Object(n.useState)(!1),c=Object(l.a)(r,2),o=c[0],s=c[1],i=Object(n.useState)(!1),g=Object(l.a)(i,2),d=g[0],f=g[1];return Object(n.useEffect)((function(){R("token")?f(!0):s(!0)}),[e]),o?a.a.createElement(u.a,{to:V}):d?a.a.createElement(q,{name:e.name,logoutCallback:function(){k("token","",-1e3),t(w(""))}}):a.a.createElement("div",null,"Loading...")},Q=function(){return a.a.createElement(H,null)},V="/neko-login-register-forgot/sign-in",X="/neko-login-register-forgot/register",Y="/neko-login-register-forgot/forgot",Z="/neko-login-register-forgot/neko",ee=function(){return a.a.createElement("div",null,a.a.createElement(u.b,{exact:!0,path:"/neko-login-register-forgot",render:function(){return a.a.createElement(u.a,{to:V})}}),a.a.createElement(u.b,{path:V,render:function(){return a.a.createElement(N,null)}}),a.a.createElement(u.b,{path:X,render:function(){return a.a.createElement(U,null)}}),a.a.createElement(u.b,{path:Y,render:function(){return a.a.createElement(z,null)}}),a.a.createElement(u.b,{path:Z,render:function(){return a.a.createElement(Q,null)}}))},te=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),r=t[0],c=t[1];return a.a.createElement("div",{style:{display:"flex",flexFlow:"row",alignItems:"center",justifyContent:"space-around"}},a.a.createElement("button",{onClick:function(){return c(!r)}},r?"hide dev header":"show dev header"),r&&a.a.createElement(s.b,{to:V},"sign-in"),r&&a.a.createElement(s.b,{to:X},"register"),r&&a.a.createElement(s.b,{to:Y},"forgot"),r&&a.a.createElement(s.b,{to:Z},"neko"),r&&a.a.createElement("button",{onClick:function(){return k("token","xxx",172800)}},"add token"))},re=function(){return a.a.createElement("div",null,a.a.createElement(te,null),a.a.createElement(ee,null))},ne=r(16),ae=r(36),ce=r(3),oe={loading:!1,success:!1,error:""},se={email:"test@email.com",password:"test password",password2:"test password2",loading:!1,success:!1,error:""},le={email:"test@email.com",loading:!1,success:!1,error:""},ue={name:"test name"},ie=Object(ne.c)({signIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN/LOADING":return Object(ce.a)({},e,{loading:t.loading,error:"",success:!1});case"SIGN_IN/SUCCESS":return Object(ce.a)({},e,{loading:!1,success:t.success,error:""});case"SIGN_IN/ERROR":return Object(ce.a)({},e,{loading:!1,success:!1,error:t.error});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER/SET_EMAIL":return Object(ce.a)({},e,{email:t.email,error:"",success:!1});case"REGISTER/SET_PASSWORD":return Object(ce.a)({},e,{password:t.password,error:"",success:!1});case"REGISTER/SET_PASSWORD_2":return Object(ce.a)({},e,{password2:t.password2,error:"",success:!1});case"REGISTER/LOADING":return Object(ce.a)({},e,{loading:t.loading,error:"",success:!1});case"REGISTER/SUCCESS":return Object(ce.a)({},e,{loading:!1,success:t.success,error:""});case"REGISTER/ERROR":return Object(ce.a)({},e,{loading:!1,success:!1,error:t.error});default:return e}},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT/SET_EMAIL":return Object(ce.a)({},e,{email:t.email,error:"",success:!1});case"FORGOT/LOADING":return Object(ce.a)({},e,{loading:t.loading,error:"",success:!1});case"FORGOT/SUCCESS":return Object(ce.a)({},e,{loading:!1,success:t.success,error:""});case"FORGOT/ERROR":return Object(ce.a)({},e,{loading:!1,success:!1,error:t.error});default:return e}},neko:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEKO/SET_NAME":return Object(ce.a)({},e,{name:t.name});default:return e}}}),me=Object(ne.d)(ie,Object(ne.a)(ae.a)),ge=me;window.store=me;var de=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(s.a,null,a.a.createElement(m.a,{store:ge},a.a.createElement(re,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.07c2cc62.chunk.js.map