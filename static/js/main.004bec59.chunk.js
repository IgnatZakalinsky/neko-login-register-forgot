(this["webpackJsonplogin-register-forgot"]=this["webpackJsonplogin-register-forgot"]||[]).push([[0],{37:function(e,t,r){e.exports=r(67)},42:function(e,t,r){},43:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(18),o=r.n(c),s=(r(42),r(43),r(11)),l=r(4),u=r(13),i=function(e){var t=e.email,r=e.password,n=e.loading,c=e.success,o=e.error,l=e.rememberMe,u=e.signInRememberMeCallback,i=e.signInSetEmailCallback,m=e.signInSetPasswordCallback,d=e.signInCallback;return"string"!==typeof o&&(o=JSON.stringify(o)),a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"sign-in",n&&a.a.createElement("div",{style:{color:"orange"}},"loading..."),c&&a.a.createElement("div",{style:{color:"lime"}},"Success!"),o&&a.a.createElement("div",{style:{color:"red"}},o),a.a.createElement("div",null,a.a.createElement("input",{value:t,onChange:function(e){return i(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("input",{value:r,onChange:function(e){return m(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(s.b,{to:X},"Forgot password?")),a.a.createElement("div",null,a.a.createElement("button",{onClick:d},"Sign In")),a.a.createElement("div",null,a.a.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return u(e.currentTarget.checked)}}),"Remember Me"),a.a.createElement("div",null,a.a.createElement(s.b,{to:V},"Registration")))},m=r(6),d=function(e){return{type:"SIGN_IN/SUCCESS",success:e}},g=function(e){return{type:"SIGN_IN/ERROR",error:e}},E=r(2),f=r.n(E),p=r(15),b=r.n(p),v="http://localhost:7542",S=b.a.create({baseURL:v}),w=function(e,t,r){var n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(S.post("/auth/login",{email:e,password:t,rememberMe:r}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},O=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^1+(e.length-r)%32);return t},h=function(e){return{type:"NEKO/SET_NAME",name:e}},R=function(e,t,r){document.cookie="".concat(e,"=").concat(t,";max-age=").concat(r,";path=/")},k=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},I=/^[\w]{1}[\w-\.]*@[\w-]+\.[a-z]{2,7}$/i,y=function(e){return I.test(e)},C=function(e){return e.length>7},T=b.a.create({baseURL:v}),N=function(e){var t;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(T.post("/auth/me",{token:e}));case 2:return t=r.sent,r.abrupt("return",t.data);case 4:case"end":return r.stop()}}))},j=function(){var e=Object(m.c)((function(e){return e.signIn})),t=Object(m.b)();Object(n.useEffect)((function(){t((function(e,t){var r,n;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h("Loading...")),r=k("token")||"",t.prev=2,t.next=5,f.a.awrap(N(r));case 5:(n=t.sent).error?e(h(n.error)):(e(h(n.name)),R("token",n.token,172800),e(d(!0)),console.log("Neko Get Me Success!",n.name)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),e(h(t.t0.message)),console.log("Neko Get Me Error!",t.t0);case 13:case"end":return t.stop()}}),null,null,[[2,9]])}))}),[]);var r=Object(n.useState)(!1),c=Object(u.a)(r,2),o=c[0],s=c[1];return e.success&&setTimeout((function(){return s(!0)}),500),o?(setTimeout((function(){t(d(!1))}),500),a.a.createElement(l.a,{to:Y})):a.a.createElement(i,{email:e.email,password:e.password,loading:e.loading,success:e.success,error:e.error,rememberMe:e.rememberMe,signInRememberMeCallback:function(e){return t({type:"SIGN_IN/REMEMBER_ME",rememberMe:e})},signInSetEmailCallback:function(e){return t(function(e){return{type:"SIGN_IN/SET_EMAIL",email:e}}(e))},signInSetPasswordCallback:function(e){return t(function(e){return{type:"SIGN_IN/SET_PASSWORD",password:e}}(e))},signInCallback:function(){y(e.email)?C(e.password)?t((function(e,t){var r,n,a,c,o;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e({type:"SIGN_IN/LOADING",loading:!0}),r=t().signIn,n=r.email,a=r.password,c=r.rememberMe,s.prev=2,s.next=5,f.a.awrap(w(n,O(a),c));case 5:(o=s.sent).error?e(g(o.error)):(e(h(o.name)),R("token",o.token,172800),e(d(!0)),console.log("Neko Sign-in Success!",o)),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(2),e(g(s.t0.message)),console.log("Neko Sign-in Error!",s.t0);case 13:case"end":return s.stop()}}),null,null,[[2,9]])})):t(g("Password not valid! must be more than 7 characters...")):t(g("Email not valid!"))}})},G=function(){return a.a.createElement(j,null)},x=function(e){var t=e.email,r=e.password,n=e.password2,c=e.loading,o=e.success,s=e.error,l=e.registerSetEmailCallback,u=e.registerSetPasswordCallback,i=e.registerSetPasswordCallback2,m=e.registerCallback;return"string"!==typeof s&&(s=JSON.stringify(s)),a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"register",c&&a.a.createElement("div",{style:{color:"orange"}},"loading..."),o&&a.a.createElement("div",{style:{color:"lime"}},"Success!"),s&&a.a.createElement("div",{style:{color:"red"}},s),a.a.createElement("div",null,a.a.createElement("input",{value:t,onChange:function(e){return l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("input",{value:r,onChange:function(e){return u(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("input",{value:n,onChange:function(e){return i(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("button",{onClick:m},"Register")))},_=function(e){return{type:"REGISTER/SUCCESS",success:e}},M=function(e){return{type:"REGISTER/ERROR",error:e}},A=b.a.create({baseURL:v}),L=function(e,t){var r;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(A.post("/auth/register",{email:e,password:t}));case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}))},F=function(){var e=Object(m.c)((function(e){return e.register})),t=Object(m.b)(),r=Object(n.useState)(!1),c=Object(u.a)(r,2),o=c[0],s=c[1];return e.success&&setTimeout((function(){return s(!0)}),500),o?(setTimeout((function(){t(_(!1))}),500),a.a.createElement(l.a,{to:Q})):a.a.createElement(x,{email:e.email,password:e.password,password2:e.password2,loading:e.loading,success:e.success,error:e.error,registerSetEmailCallback:function(e){return t(function(e){return{type:"REGISTER/SET_EMAIL",email:e}}(e))},registerSetPasswordCallback:function(e){return t(function(e){return{type:"REGISTER/SET_PASSWORD",password:e}}(e))},registerSetPasswordCallback2:function(e){return t({type:"REGISTER/SET_PASSWORD_2",password2:e})},registerCallback:function(){y(e.email)?C(e.password)?e.password!==e.password2?t(M("Passwords do not match!")):t((function(e,t){var r,n,a,c;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e({type:"REGISTER/LOADING",loading:!0}),r=t().register,n=r.email,a=r.password,o.prev=2,o.next=5,f.a.awrap(L(n,O(a)));case 5:(c=o.sent).error?e(M(c.error)):(e(_(!1)),console.log("Neko Register Success!",c)),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(2),e(M(o.t0.message)),console.log("Neko Register Error!",o.t0);case 13:case"end":return o.stop()}}),null,null,[[2,9]])})):t(M("Password not valid! must be more than 7 characters...")):t(M("Email not valid!"))}})},P=function(){return a.a.createElement(F,null)},D=function(e){var t=e.email,r=e.loading,n=e.success,c=e.error,o=e.forgotSetEmailCallback,s=e.forgotCallback;return"string"!==typeof c&&(c=JSON.stringify(c)),a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"forgot",r&&a.a.createElement("div",{style:{color:"orange"}},"loading..."),n&&a.a.createElement("div",{style:{color:"lime"}},"Success!"),c&&a.a.createElement("div",{style:{color:"red"}},c),a.a.createElement("div",null,a.a.createElement("input",{value:t,onChange:function(e){return o(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement("button",{onClick:s},"Send email")))},U=function(e){return{type:"FORGOT/SUCCESS",success:e}},W=function(e){return{type:"FORGOT/ERROR",error:e}},J=b.a.create({baseURL:v}),B=function(e){var t;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(J.post("/auth/forgot",{email:e}));case 2:return t=r.sent,r.abrupt("return",t.data);case 4:case"end":return r.stop()}}))},$=function(){var e=Object(m.c)((function(e){return e.forgot})),t=Object(m.b)(),r=Object(n.useState)(!1),c=Object(u.a)(r,2),o=c[0],s=c[1];return e.success&&setTimeout((function(){return s(!0)}),500),o?(setTimeout((function(){t(U(!1))}),500),a.a.createElement(l.a,{to:Q})):a.a.createElement(D,{email:e.email,loading:e.loading,success:e.success,error:e.error,forgotSetEmailCallback:function(e){return t(function(e){return{type:"FORGOT/SET_EMAIL",email:e}}(e))},forgotCallback:function(){y(e.email)?t((function(e,t){var r,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:"FORGOT/LOADING",loading:!0}),r=t().forgot.email,a.prev=2,a.next=5,f.a.awrap(B(r));case 5:(n=a.sent).error?e(W(n.error)):(e(U(!1)),console.log("Neko Forgot Success!",n)),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),e(W(a.t0.message)),console.log("Neko Forgot Error!",a.t0);case 13:case"end":return a.stop()}}),null,null,[[2,9]])})):t(W("Email not valid!"))}})},K=function(){return a.a.createElement($,null)},z=function(e){var t=e.name,r=e.logoutCallback;return a.a.createElement("div",{style:{height:"80vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"}},"neko",t&&a.a.createElement("div",{style:{color:"lime"}},t),a.a.createElement("div",null,a.a.createElement("button",{onClick:r},"logout")))},H=function(){var e=Object(m.c)((function(e){return e.neko})),t=Object(m.b)(),r=Object(n.useState)(!1),c=Object(u.a)(r,2),o=c[0],s=c[1],i=Object(n.useState)(!1),d=Object(u.a)(i,2),g=d[0],E=d[1];return Object(n.useEffect)((function(){k("token")?E(!0):s(!0)}),[e]),o?a.a.createElement(l.a,{to:Q}):g?a.a.createElement(z,{name:e.name,logoutCallback:function(){R("token","",-1e3),t(h(""))}}):a.a.createElement("div",null,"Loading...")},q=function(){return a.a.createElement(H,null)},Q="/neko-login-register-forgot/sign-in",V="/neko-login-register-forgot/register",X="/neko-login-register-forgot/forgot",Y="/neko-login-register-forgot/neko",Z=function(){return a.a.createElement("div",null,a.a.createElement(l.b,{exact:!0,path:"/neko-login-register-forgot",render:function(){return a.a.createElement(l.a,{to:Q})}}),a.a.createElement(l.b,{path:Q,render:function(){return a.a.createElement(G,null)}}),a.a.createElement(l.b,{path:V,render:function(){return a.a.createElement(P,null)}}),a.a.createElement(l.b,{path:X,render:function(){return a.a.createElement(K,null)}}),a.a.createElement(l.b,{path:Y,render:function(){return a.a.createElement(q,null)}}))},ee=function(){return a.a.createElement("div",{style:{display:"flex",flexFlow:"row",alignItems:"center",justifyContent:"space-around"}},"Header for dev:",a.a.createElement(s.b,{to:Q},"sign-in"),a.a.createElement(s.b,{to:V},"register"),a.a.createElement(s.b,{to:X},"forgot"),a.a.createElement(s.b,{to:Y},"neko"),a.a.createElement("button",{onClick:function(){return R("token","xxx",172800)}},"add token"))},te=function(){return a.a.createElement("div",null,a.a.createElement(ee,null),a.a.createElement(Z,null))},re=r(16),ne=r(36),ae=r(3),ce={email:"test@email.com",password:"test password",loading:!1,success:!1,error:"",rememberMe:!1},oe={email:"test@email.com",password:"test password",password2:"test password2",loading:!1,success:!1,error:""},se={email:"test@email.com",loading:!1,success:!1,error:""},le={name:"test name"},ue=Object(re.c)({signIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN/SET_EMAIL":return Object(ae.a)({},e,{email:t.email,error:"",success:!1});case"SIGN_IN/SET_PASSWORD":return Object(ae.a)({},e,{password:t.password,error:"",success:!1});case"SIGN_IN/LOADING":return Object(ae.a)({},e,{loading:t.loading,error:"",success:!1});case"SIGN_IN/SUCCESS":return Object(ae.a)({},e,{loading:!1,success:t.success,error:""});case"SIGN_IN/ERROR":return Object(ae.a)({},e,{loading:!1,success:!1,error:t.error});case"SIGN_IN/REMEMBER_ME":return Object(ae.a)({},e,{loading:!1,success:!1,error:"",rememberMe:t.rememberMe});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER/SET_EMAIL":return Object(ae.a)({},e,{email:t.email,error:"",success:!1});case"REGISTER/SET_PASSWORD":return Object(ae.a)({},e,{password:t.password,error:"",success:!1});case"REGISTER/SET_PASSWORD_2":return Object(ae.a)({},e,{password2:t.password2,error:"",success:!1});case"REGISTER/LOADING":return Object(ae.a)({},e,{loading:t.loading,error:"",success:!1});case"REGISTER/SUCCESS":return Object(ae.a)({},e,{loading:!1,success:t.success,error:""});case"REGISTER/ERROR":return Object(ae.a)({},e,{loading:!1,success:!1,error:t.error});default:return e}},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT/SET_EMAIL":return Object(ae.a)({},e,{email:t.email,error:"",success:!1});case"FORGOT/LOADING":return Object(ae.a)({},e,{loading:t.loading,error:"",success:!1});case"FORGOT/SUCCESS":return Object(ae.a)({},e,{loading:!1,success:t.success,error:""});case"FORGOT/ERROR":return Object(ae.a)({},e,{loading:!1,success:!1,error:t.error});default:return e}},neko:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEKO/SET_NAME":return Object(ae.a)({},e,{name:t.name});default:return e}}}),ie=Object(re.d)(ue,Object(re.a)(ne.a)),me=ie;window.store=ie;var de=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(s.a,null,a.a.createElement(m.a,{store:me},a.a.createElement(te,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.004bec59.chunk.js.map